<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>One Consumer, One Producer, Two Goods · MPSGE.jl</title><meta name="title" content="One Consumer, One Producer, Two Goods · MPSGE.jl"/><meta property="og:title" content="One Consumer, One Producer, Two Goods · MPSGE.jl"/><meta property="twitter:title" content="One Consumer, One Producer, Two Goods · MPSGE.jl"/><meta name="description" content="Documentation for MPSGE.jl."/><meta property="og:description" content="Documentation for MPSGE.jl."/><meta property="twitter:description" content="Documentation for MPSGE.jl."/><meta property="og:url" content="https://julia-mpsge.github.io/MPSGE.jl/Tutorials/robinson_crusoe/basic_rc/"/><meta property="twitter:url" content="https://julia-mpsge.github.io/MPSGE.jl/Tutorials/robinson_crusoe/basic_rc/"/><link rel="canonical" href="https://julia-mpsge.github.io/MPSGE.jl/Tutorials/robinson_crusoe/basic_rc/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">MPSGE.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../../">MPSGE</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../getting_started/introduction/">Introduction</a></li><li><a class="tocitem" href="../../getting_started/first_example/">Getting Started with MPSGE</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Intermediate Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../intermediate_examples/M22/">Closed <span>$2\times2$</span> Economy with Intermediate Inputs and Nesting</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox" checked/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Robinson Crusoe</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../introduction/">Robinson Crusoe - Introduction</a></li><li class="is-active"><a class="tocitem" href>One Consumer, One Producer, Two Goods</a><ul class="internal"><li><a class="tocitem" href="#Model-Definition"><span>Model Definition</span></a></li><li><a class="tocitem" href="#Extracting-Model-Equations"><span>Extracting Model Equations</span></a></li></ul></li></ul></li></ul></li><li><span class="tocitem">How it works</span><ul><li><a class="tocitem" href="../../../how_it_works/">How MPSGE Works</a></li></ul></li><li><span class="tocitem">Docstrings</span><ul><li><a class="tocitem" href="../../../docs/">-</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li><a class="is-disabled">Robinson Crusoe</a></li><li class="is-active"><a href>One Consumer, One Producer, Two Goods</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>One Consumer, One Producer, Two Goods</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/julia-mpsge/MPSGE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/julia-mpsge/MPSGE.jl/blob/main/docs/src/Tutorials/robinson_crusoe/basic_rc.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="One-Consumer,-One-Producer,-Two-Goods"><a class="docs-heading-anchor" href="#One-Consumer,-One-Producer,-Two-Goods">One Consumer, One Producer, Two Goods</a><a id="One-Consumer,-One-Producer,-Two-Goods-1"></a><a class="docs-heading-anchor-permalink" href="#One-Consumer,-One-Producer,-Two-Goods" title="Permalink"></a></h1><h2 id="Model-Definition"><a class="docs-heading-anchor" href="#Model-Definition">Model Definition</a><a id="Model-Definition-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Definition" title="Permalink"></a></h2><p>In this economy, Robinson Crusoe acts as both a producer and consumer of <code>coconuts</code> and <code>fish</code>. To disambiguate between the producer and consumer, we will refer to the producer as <code>rc_producer</code> and the consumer as <code>rc_consumer</code>.</p><p>There are three commodities: <code>coconuts</code>, <code>fish</code> and <code>labor</code>. We will call these variables <code>price_coconuts</code>, <code>price_fish</code> and <code>price_labor</code>. <code>rc_producer</code> takes in <code>price_labor</code> and outputs both <code>price_fish</code> and <code>price_coconuts</code>. Conversely, <code>rc_consumer</code> demands both <code>price_fish</code> and <code>price_coconuts</code> and endows the market with <code>price_labor</code>.</p><p>At this point we can initialize our model. The first step is load the MPSGE package and initialize our model.</p><pre><code class="language-julia hljs">using MPSGE

M = MPSGEModel()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">
$Sectors:

$Commodities:

$Consumers:


</code></pre><p>Next we define our <a href="../../../docs/#MPSGE.@sector-Tuple"><code>@sector</code></a>, <a href="../../../docs/#MPSGE.@commodities-Tuple{Any, Any}"><code>@commodities</code></a>, and <a href="../../../docs/#MPSGE.@consumer-Tuple"><code>@consumer</code></a>. Notice the use of singular and plural, we are using the singular <code>@sector</code> since we only have one sector. We could have three <code>@commodity(M, price_X)</code> statements rather than the single <code>@commodities</code> using the plural is less typing.</p><p>The last line prints the model. This is not a standard or necessary step. But it&#39;s useful to verify our variables have been added to the model.</p><pre><code class="language-julia hljs">@sector(M, rc_producer)

@commodities(M, begin
    price_coconuts
    price_fish
    price_labor
end)

@consumer(M, rc_consumer)

print(M)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">
$Sectors:
rc_producer

$Commodities:
price_coconuts
price_fish
price_labor

$Consumers:
rc_consumer</code></pre><p>Similar to JuMP, these macros put each variable name into the local scope. That means we can use <code>price_coconuts</code> rather than extracting from the model, e.g. <code>M[:price_coconuts]</code>.</p><p>The code below works, but isn&#39;t interesting. It&#39;s just demonstrating that <code>price_coconuts</code> is in the local namespace.</p><pre><code class="language-julia hljs">price_coconuts</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">price_coconuts</code></pre><p>A <a href="../../../docs/#MPSGE.@production-Tuple"><code>@production</code></a> block defines the inputs and outputs from a sector. Recall we said</p><pre><code class="nohighlight hljs">  `rc_producer` takes in `price_labor` and outputs both `price_fish` and
  `price_coconuts`</code></pre><p>This tells us the inputs and outputs. For the moment we are going to set all quantities to one. We will have examples later that deal with balanced data.</p><p>The code <code>[s=0,t=0]</code> defines the elasticity of substitution and the elasticity transformation. By convention these are denoted <code>s</code> and <code>t</code>, but that is not a requirement any name is sufficient. Future examples will show a far more complex nesting structure.</p><pre><code class="language-julia hljs">@production(M, rc_producer, [s=0, t=0], begin
    @output(price_coconuts, 1, t)
    @output(price_fish, 1, t)
    @input(price_labor, 1, s)
end)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">$Production: rc_producer
:t = 0
  O:price_coconuts    Q:1
  O:price_fish    Q:1

:s = 0
  I:price_labor    Q:1
</code></pre><p>We define the demands in a <code>@demand</code> block. This resembles a production block with no elasticities.</p><pre><code class="language-julia hljs">@demand(M, rc_consumer, begin
    @final_demand(price_coconuts, 1)
    @final_demand(price_fish, 1)
    @endowment(price_labor, 1)
end)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">$Demand: rc_consumer
    D: price_fish    Q: 1.0
    D: price_coconuts    Q: 1.0
    E: price_labor    Q: 1
</code></pre><p>We are going to set <code>price_coconuts</code> as the numeraire and fix it&#39;s value to 1. This is not a necessary step, if there is no numeraire MPSGE will set fix the value of the largest consumer as the numeraire, this is reported to the user when the model is solved.</p><pre><code class="language-julia hljs">fix(price_coconuts, 1)</code></pre><p>Finally we solve the model and generate a report.</p><pre><code class="language-julia hljs">solve!(M)

generate_report(M)</code></pre><div><div style = "float: left;"><span>5×3 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">var</th><th style = "text-align: left;">value</th><th style = "text-align: left;">margin</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "JuMP.VariableRef" style = "text-align: left;">GenericV…</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">price_coconuts</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">5.24743e-7</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">price_fish</td><td style = "text-align: right;">0.999999</td><td style = "text-align: right;">-4.13679e-7</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">rc_producer</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">3.29525e-10</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">price_labor</td><td style = "text-align: right;">2.0</td><td style = "text-align: right;">-3.70207e-8</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: left;">rc_consumer</td><td style = "text-align: right;">2.0</td><td style = "text-align: right;">-3.73513e-8</td></tr></tbody></table></div><p>Results can also be extracted using <code>value</code>. Most JuMP features have been extended to work on MPSGE variables.</p><pre><code class="language-julia hljs">value(price_fish)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.9999990615779641</code></pre><p>Discuss the results of the model</p><h2 id="Extracting-Model-Equations"><a class="docs-heading-anchor" href="#Extracting-Model-Equations">Extracting Model Equations</a><a id="Extracting-Model-Equations-1"></a><a class="docs-heading-anchor-permalink" href="#Extracting-Model-Equations" title="Permalink"></a></h2><p>There isn&#39;t much else we can do with this model, there are no parameters so we can&#39;t modify values and re-solve. However, in this simple model we can explore the equations and model structure.</p><p>We can extract production blocks to ensure they were input correctly. This view uses a syntax similar to MPSGE.GAMS, but should be readable.</p><pre><code class="language-julia hljs">production(rc_producer)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">$Production: rc_producer
:t = 0
  O:price_coconuts    Q:1
  O:price_fish    Q:1

:s = 0
  I:price_labor    Q:1
</code></pre><p>There are three types of constraints in a MPSGE model, <code>zero_profit</code>, <code>market_clearance</code>, and <code>income_balance</code>. We can extract each of these.</p><p>Zero profit takes in a <code>sector</code>:</p><pre><code class="language-julia hljs">MPSGE.zero_profit(rc_producer)</code></pre><p class="math-container">\[ {\left({0.0} + {\left({1.0} * {\left({\left(price\_labor\right)} ^ {1.0}\right)}\right)}\right)} - {\left({0.0} + {\left({2.0} * {\left({\left(0.5 price\_coconuts + 0.5 price\_fish\right)} ^ {1.0}\right)}\right)}\right)} \]</p><p>Market clearance takes a <code>commodity</code>:</p><pre><code class="language-julia hljs">MPSGE.market_clearance(price_coconuts)</code></pre><p class="math-container">\[ {\left(rc\_producer\right)} - {\left({0.0} + {0.0} + {\left({\left(0.5 rc\_consumer\right)} / {price\_coconuts}\right)}\right)} \]</p><p>And income balance takes a <code>consumer</code>:</p><pre><code class="language-julia hljs">MPSGE.income_balance(rc_consumer)</code></pre><p class="math-container">\[ rc\_consumer - price\_labor \]</p><p>We can extract the market clearing conditions for all the commodities using broadcasting.</p><pre><code class="language-julia hljs">MPSGE.market_clearance.(commodities(M))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element Vector{JuMP.AbstractJuMPScalar}:
 (rc_producer) - (0.0 + 0.0 + ((0.5 rc_consumer) / price_coconuts))
 (rc_producer) - (0.0 + 0.0 + ((0.5 rc_consumer) / price_fish))
 -rc_producer + 1</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../introduction/">« Robinson Crusoe - Introduction</a><a class="docs-footer-nextpage" href="../../../how_it_works/">How MPSGE Works »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 22 July 2025 10:42">Tuesday 22 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
