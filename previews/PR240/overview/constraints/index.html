<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Model Equations · MPSGE.jl</title><meta name="title" content="Model Equations · MPSGE.jl"/><meta property="og:title" content="Model Equations · MPSGE.jl"/><meta property="twitter:title" content="Model Equations · MPSGE.jl"/><meta name="description" content="Documentation for MPSGE.jl."/><meta property="og:description" content="Documentation for MPSGE.jl."/><meta property="twitter:description" content="Documentation for MPSGE.jl."/><meta property="og:url" content="https://julia-mpsge.github.io/MPSGE.jl/overview/constraints/"/><meta property="twitter:url" content="https://julia-mpsge.github.io/MPSGE.jl/overview/constraints/"/><link rel="canonical" href="https://julia-mpsge.github.io/MPSGE.jl/overview/constraints/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MPSGE.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../">MPSGE</a></li></ul></li><li><span class="tocitem">Overview</span><ul><li><a class="tocitem" href="../introduction/">Overview of MPSGE</a></li><li><a class="tocitem" href="../variables/">MPSGE Variables</a></li><li><a class="tocitem" href="../production/">Production Blocks</a></li><li><a class="tocitem" href="../demand/">Demand Blocks</a></li><li class="is-active"><a class="tocitem" href>Model Equations</a><ul class="internal"><li><a class="tocitem" href="#Compensated-Demand"><span>Compensated Demand</span></a></li><li><a class="tocitem" href="#Zero-Profit"><span>Zero Profit</span></a></li><li><a class="tocitem" href="#Market-Clearance"><span>Market Clearance</span></a></li><li><a class="tocitem" href="#Income-Balance"><span>Income Balance</span></a></li></ul></li><li><a class="tocitem" href="../optimizations/">Optimizations</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/getting_started/introduction/">Introduction</a></li><li><a class="tocitem" href="../../Tutorials/getting_started/first_example/">Getting Started with MPSGE</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Intermediate Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/intermediate_examples/m22/">Closed <span>$2\times2$</span> Economy with Intermediate Inputs and Nesting</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Robinson Crusoe</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/robinson_crusoe/introduction/">Robinson Crusoe - Introduction</a></li><li><a class="tocitem" href="../../Tutorials/robinson_crusoe/basic_rc/">One Consumer, One Producer, Two Goods</a></li></ul></li></ul></li><li><span class="tocitem">Mathematical Background</span><ul><li><a class="tocitem" href="../../how_it_works/">How MPSGE Works</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../docs/">API Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Overview</a></li><li class="is-active"><a href>Model Equations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Model Equations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/julia-mpsge/MPSGE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/julia-mpsge/MPSGE.jl/blob/main/docs/src/overview/constraints.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Model-Equations"><a class="docs-heading-anchor" href="#Model-Equations">Model Equations</a><a id="Model-Equations-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Equations" title="Permalink"></a></h1><p>CGE models have three classes of constraints:</p><ul><li>Zero Profit - All money earned is allocated.</li><li>Market Clearance - All goods produced are consumed.</li><li>Income Balance - All income earned is spent.</li></ul><p>MPSGE builds these equations automatically based on the production and demand blocks defined in the model. Before detailing exactly how these equations are built, we need to first discuss compensated demands.</p><h2 id="Compensated-Demand"><a class="docs-heading-anchor" href="#Compensated-Demand">Compensated Demand</a><a id="Compensated-Demand-1"></a><a class="docs-heading-anchor-permalink" href="#Compensated-Demand" title="Permalink"></a></h2><p>Sectoral profit is given by the difference between total revenue and total cost. Each production block defines the inputs (costs) and outputs (revenues) of a sector. In MPSGE syntax, the profit of a sector is given by:</p><pre><code class="language-julia hljs">revenue_function(X) - cost_function(X)</code></pre><p>The compensated demand is defined for a sector and commodity, it is the derivative of profit with respect to the <em>tax adjusted</em> price. If <span>$\Pi_X$</span> is the profit of sector <span>$X$</span> and <span>$\bar{P}_C$</span> is the tax adjusted price of commodity <span>$C$</span>, then the compensated demand, <span>$CD_{X,C}$</span>, is given by:</p><p class="math-container">\[CD_{X,C} = \frac{\partial \Pi_X}{\partial \bar{P}_C}\]</p><p>By <a href="https://en.wikipedia.org/wiki/Hotelling%27s_lemma">Hotelling&#39;s Lemma</a>, we can view compensated demand as the &quot;quantity&quot; of good <span>$C$</span> purchased/sold by sector <span>$X$</span>. To recover the adjusted &quot;reference quantity&quot;, we need to multiply the compensated demand by the activity level <span>$X$</span>. The activity level adjusts the compensated demand to reflect changes in sectoral production given a shock to the economy.</p><div class="admonition is-info" id="GAMS-Report-Block-9350a28167c5d03a"><header class="admonition-header">GAMS Report Block<a class="admonition-anchor" href="#GAMS-Report-Block-9350a28167c5d03a" title="Permalink"></a></header><div class="admonition-body"><p>In GAMS, the report block in MPSGE reports the compensated demand times the sectoral activity level.</p></div></div><p>Finally, we can compute the total value of good <span>$C$</span> purchased/sold by sector <span>$X$</span> by multiplying the adjusted quantity by the price:</p><p class="math-container">\[C\cdot X\cdot CD_{X,C}\]</p><h2 id="Zero-Profit"><a class="docs-heading-anchor" href="#Zero-Profit">Zero Profit</a><a id="Zero-Profit-1"></a><a class="docs-heading-anchor-permalink" href="#Zero-Profit" title="Permalink"></a></h2><p>This constraint is self explanatory, each sector&#39;s total revenue must equal its total cost. The actual constraint is:</p><p class="math-container">\[-\Pi_X = 0 \perp X\]</p><p>The reason we specify negative profit is that MPSGE uses the PATH Solver which is an oriented solver. You can think of this as PATH using an inequality constraint of the form <span>$f(x) \geq 0$</span>. By specifying negative profit, we ensure the inequality is oriented correctly. </p><h2 id="Market-Clearance"><a class="docs-heading-anchor" href="#Market-Clearance">Market Clearance</a><a id="Market-Clearance-1"></a><a class="docs-heading-anchor-permalink" href="#Market-Clearance" title="Permalink"></a></h2><p>This constraint ensures that for each commodity, total supply equals total demand. Luckily, we&#39;ve already established how to compute supply and demand using compensated demands. For a fixed commodity <span>$C$</span>, the total supply is the sum over all sectors, <span>$X$</span>, of <span>$X\cdot CD_{X,C}$</span>, plus any endowments provided by consumers minus any demands from consumers. The market clearance constraint is therefore:</p><p class="math-container">\[\sum_{X} X\cdot CD_{X,C} + \sum_{H\in {\rm consumers}} E_{H,C} - \sum_{H\in {\rm consumers}} D_{H,C} = 0 \perp C\]</p><p>Where <span>$E_{H,C}$</span> is the endowment of good <span>$C$</span> from consumer <span>$H$</span>. The term <span>$D_{H,C}$</span> is the demand of good <span>$C$</span> from consumer <span>$H$</span>, defined as</p><p class="math-container">\[D_{H,C} = \frac{Q_C}{Q_H}\cdot \frac{H}{C}\]</p><p>where <span>$Q_C$</span> is the quantity of good <span>$C$</span> demanded by consumer <span>$H$</span> and <span>$Q_H$</span> is the total quantity of all goods demanded by consumer <span>$H$</span>.</p><h2 id="Income-Balance"><a class="docs-heading-anchor" href="#Income-Balance">Income Balance</a><a id="Income-Balance-1"></a><a class="docs-heading-anchor-permalink" href="#Income-Balance" title="Permalink"></a></h2><p>The income balance constraint sets the total income of each consumer. The total income is defined to be the sum of endowments plus tax revenue. For a fixed consumer <span>$H$</span>, the income balance constraint is given by:</p><p class="math-container">\[H = \sum_{C} E_{H,C} \cdot P_C + \sum_{S\in{\rm sectors}} \sum_{C\in{\rm commodities}} \tau_{S,C,H} \cdot C \cdot S \cdot CD_{S,C} \perp H\]</p><p>The first term is straight forward, it is the total value of endowments provided by consumer <span>$H$</span>. The second term is the total tax revenue received by consumer <span>$H$</span>. Here, <span>$\tau_{S,C,H}$</span> is the tax rate applied to sector <span>$S$</span> for commodity <span>$C$</span> that is paid to consumer <span>$H$</span>.</p><div class="admonition is-info" id="Income-Balance?-abb270978ac44a2d"><header class="admonition-header">Income Balance?<a class="admonition-anchor" href="#Income-Balance?-abb270978ac44a2d" title="Permalink"></a></header><div class="admonition-body"><p>This isn&#39;t so much of a constraint as it is a definition of the variable <span>$H$</span>, which is the total income of consumer <span>$H$</span>. In a way, this is a sub-expression representing total income.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../demand/">« Demand Blocks</a><a class="docs-footer-nextpage" href="../optimizations/">Optimizations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 19 December 2025 13:48">Friday 19 December 2025</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
