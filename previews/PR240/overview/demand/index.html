<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Demand Blocks · MPSGE.jl</title><meta name="title" content="Demand Blocks · MPSGE.jl"/><meta property="og:title" content="Demand Blocks · MPSGE.jl"/><meta property="twitter:title" content="Demand Blocks · MPSGE.jl"/><meta name="description" content="Documentation for MPSGE.jl."/><meta property="og:description" content="Documentation for MPSGE.jl."/><meta property="twitter:description" content="Documentation for MPSGE.jl."/><meta property="og:url" content="https://julia-mpsge.github.io/MPSGE.jl/overview/demand/"/><meta property="twitter:url" content="https://julia-mpsge.github.io/MPSGE.jl/overview/demand/"/><link rel="canonical" href="https://julia-mpsge.github.io/MPSGE.jl/overview/demand/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MPSGE.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../">MPSGE</a></li></ul></li><li><span class="tocitem">Overview</span><ul><li><a class="tocitem" href="../introduction/">Overview of MPSGE</a></li><li><a class="tocitem" href="../variables/">MPSGE Variables</a></li><li><a class="tocitem" href="../production/">Production Blocks</a></li><li class="is-active"><a class="tocitem" href>Demand Blocks</a><ul class="internal"><li><a class="tocitem" href="#Final-Demands"><span>Final Demands</span></a></li><li><a class="tocitem" href="#Endowments"><span>Endowments</span></a></li><li><a class="tocitem" href="#Tax-Revenue"><span>Tax Revenue</span></a></li></ul></li><li><a class="tocitem" href="../constraints/">Model Equations</a></li><li><a class="tocitem" href="../optimizations/">Optimizations</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/getting_started/introduction/">Introduction</a></li><li><a class="tocitem" href="../../Tutorials/getting_started/first_example/">Getting Started with MPSGE</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Intermediate Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/intermediate_examples/m22/">Closed <span>$2\times2$</span> Economy with Intermediate Inputs and Nesting</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Robinson Crusoe</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/robinson_crusoe/introduction/">Robinson Crusoe - Introduction</a></li><li><a class="tocitem" href="../../Tutorials/robinson_crusoe/basic_rc/">One Consumer, One Producer, Two Goods</a></li></ul></li></ul></li><li><span class="tocitem">Mathematical Background</span><ul><li><a class="tocitem" href="../../how_it_works/">How MPSGE Works</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../docs/">API Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Overview</a></li><li class="is-active"><a href>Demand Blocks</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Demand Blocks</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/julia-mpsge/MPSGE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/julia-mpsge/MPSGE.jl/blob/main/docs/src/overview/demand.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Demand-Blocks"><a class="docs-heading-anchor" href="#Demand-Blocks">Demand Blocks</a><a id="Demand-Blocks-1"></a><a class="docs-heading-anchor-permalink" href="#Demand-Blocks" title="Permalink"></a></h1><div class="admonition is-info" id="Warning-bf57c3a4fa3a2af8"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-bf57c3a4fa3a2af8" title="Permalink"></a></header><div class="admonition-body"><p>Demand blocks will be undergoing significant changes in future releases. We will highlight where changes are likely to occur. The current implementation is stable.</p></div></div><p>Demand blocks collect the final demands and endowments for each consumer. In MPSGE, demand blocks are created using the <a href="../../docs/#MPSGE.@demand-Tuple"><code>@demand</code></a> macro. </p><h2 id="Final-Demands"><a class="docs-heading-anchor" href="#Final-Demands">Final Demands</a><a id="Final-Demands-1"></a><a class="docs-heading-anchor-permalink" href="#Final-Demands" title="Permalink"></a></h2><p>Each consumer demands goods, defined by the <a href="../../docs/#MPSGE.@final_demand-Tuple"><code>@final_demand</code></a> macro. It is possible that these goods are the result of a production process, with nestings and elasticities. Because of this you can view final demands as an input from a production block. Currently, this is restricted to a single nest. This is related to <a href="https://github.com/julia-mpsge/MPSGE.jl/issues/161">Issue #161</a>.</p><h3 id="Proposal-to-Change"><a class="docs-heading-anchor" href="#Proposal-to-Change">Proposal to Change</a><a id="Proposal-to-Change-1"></a><a class="docs-heading-anchor-permalink" href="#Proposal-to-Change" title="Permalink"></a></h3><p>Here is an example of a current demand structure with a non-trivial nest:</p><pre><code class="language-julia hljs">@demand(M, RA, begin
    @final_demand(X, Qx)
    @final_demand(Y, Qy)
    @final_demand(Z, Qz)
    @endowment(L, L0)
end; elasticity = 5)</code></pre><p>I propose that we change this to:</p><pre><code class="language-julia hljs">@sector(M, X_RA)
@commodity(M, PX_RA)

@production(M, X_RA, [s=5, t=0], begin
    @output(PX_RA, Qx+Qy+Qz, t)
    @input(X, Qx, s)
    @input(Y, Qy, s)
    @input(Z, Qz, s)
end)

@demand(M, RA, PX_RA, begin
    @endowment(L, L0)
end)</code></pre><p>There are several advantages to this approach. First, it reduces code duplication between production and demand blocks. Currently, a lot of the code to deal with building cost functions needs to be duplicated between production and demand blocks. Second, it allows for more complex nestings structures in the demand side. Currently, we are limited to a single nest in the demand block, but with this approach, we can have arbitrary nest structures. Third, it makes the model structure more explicit. By defining a sector and commodity for each consumer&#39;s demand, it is clear what goods are being demanded and how they are produced. Finally, it simplifies the process of extracting information from the model. With this approach, we can easily extract compensated demands for the consumers goods using existing production block functionality.</p><p>Of course, the primary disadvantage is that it requires more code to define the demand structure. There are also concerns that this approach will make some information more difficult to extract. </p><h2 id="Endowments"><a class="docs-heading-anchor" href="#Endowments">Endowments</a><a id="Endowments-1"></a><a class="docs-heading-anchor-permalink" href="#Endowments" title="Permalink"></a></h2><p>Endowments are straightforward, they are defined using the <a href="../../docs/#MPSGE.@endowment-Tuple"><code>@endowment</code></a> macro within a demand block. Endowments are simply quantities of goods that a consumer provides to the market at a certain price. You can think of endowments as outputs from the consumer to the market.</p><h2 id="Tax-Revenue"><a class="docs-heading-anchor" href="#Tax-Revenue">Tax Revenue</a><a id="Tax-Revenue-1"></a><a class="docs-heading-anchor-permalink" href="#Tax-Revenue" title="Permalink"></a></h2><p>Tax revenue is not explicitly defined in demand blocks. Instead, tax revenue is collected from the taxes applied to netputs in production blocks. Each tax specifies a consumer that receives the tax revenue. This tax revenue is automatically accounted for the income condition.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../production/">« Production Blocks</a><a class="docs-footer-nextpage" href="../constraints/">Model Equations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Monday 22 December 2025 18:36">Monday 22 December 2025</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
